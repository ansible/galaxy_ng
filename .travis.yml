# WARNING: DO NOT EDIT!
#
# This file was generated by plugin_template, and is managed by bootstrap.py. Please use
# bootstrap.py to update this file.
#
# For more info visit https://github.com/pulp/plugin_template
---
sudo: required
# https://docs.travis-ci.com/user/trusty-ci-environment/
dist: bionic
language: python
python:
  # Fedora has 3.6 available (python36.x86_64), but pulp container images
  # with it are not being built or published yet.
  # - "3.6"
  - "3.7"
env:
  global:
    # generate manifests parameters
    - secure: "f81gDicKC0d0uod/ooMcMfVcXFBXJLZYwKM7mpUSKZDy2WsCMTZ5dRuLm26Izay5fnrXOIFATJl+LmhqIX69eG0ylXFv2LFJjEzh3z86QE9IU333diuZiKtMaglTJu2bXTXuKAHXmTGAT+qo32sziEMTPaPZd5k485E9opDniFhSTD77hqusdS/m0TluRwn5YAxveoKfXK7LrJluU2GTdj56sCXeB+pZXsH50f3HCNNRKMKyN8E7VKBgoQL+/7CB2qvx0/xh621rsxNEvxt9VFCDs29w/35jmTPxDvT33eJk8uHQ1682Ox14Sk/RRdwgHABC3kgsiRxYM1Jc4mbXECfSYwO42MzAWqLw674cOXJFGWnCg+AYhkTLqiG3XD6VL3caSrBhhM7ACRMjE9HGIClvc+io5i50k42PssosFkhoQ4/wqN4o1OfxQXfKmR4rcTP9iK3keXG+zSJfR26s0xbEUpHVqq7E7Ff3ShMoETBhBQztg9PK4FHFcO0X7GMn8Eo7eBJU+lUcOT/jsggrOnS+RTe21vgMU5+ZfaVaBaP4g5sP/RLqrcAeZSvQ+SIKFIe9abEylxTNcUKbEPKlOmNTBsTy+VSpsOFsvj1A0zAALneaeycKTDIzYi6haJlmzvOpx1Y2HJY8tHGMhGFfxnnsqCQmrOe8OKZKjwDayOw="
  jobs:
    - TEST=pulp
services:
  - postgresql
  - redis-server
  - docker
addons:
  apt:
    packages:
      - httpie
      - jq
  # postgres versions provided by el7 RHSCL (lowest supportable version)
  postgresql: '9.6'
jobs:
  include:
  - stage: test and deploy
    before_install: .travis/before_install.sh
    install: .travis/install.sh
    before_script: .travis/before_script.sh
    script: .travis/script.sh
    after_failure:
      - http --timeout 30 --check-status --pretty format --print hb http://pulp/pulp/api/v3/status/
      - docker images
      - docker ps -a
      - docker logs pulp
    deploy:
      provider: pypi
      distributions: "sdist bdist_wheel"
      user: "__token__"
      skip_cleanup: true
      password:
        secure: "mNDI7pqihv+NGCbjb5vKepCp4x+fPjRboQmx1+utaPBgKtofY3Cy7KRSnIcDb5t621+Yb2ufRXk9JGliihHFUUzxVMQjxtIrT8CgbsyXYGFqCQTLp0juCShcU3uCrmn0OB5FZfv1TPmbqrD2iOq1RKx6P6kGEa06ysTelADBi39gdk6l6qfC0o8XBu407KnpOOkx6dR6FjoTmwjN4XsM/UukvBEpAPvgv9eSOJDWR/sEDjpCE2ZMLPSqqM6b01RdkzLOWcDwH56/wXW5IQ3QK4GR63tXcGk6FHw2nfgi1izJhzQWmGD1fpReyxR8EucMOSYzCQSflLiyLCEF/uwnWnFqVDufnElTBCnqMko1qwcoAHwR8fp3xM0WQvGc4krIQjDvKdPpI7vqMrHxX2ZoUG5bDgZEUoYtxlNPBQ8R5GLuupgkLgfh/bORvIxQvmBm8MVGxwO1Ze++9TwTCsxTOTKKEBu3AOtqfdY+IyvYeDPP/Zw37IvGckNGOIyT3KwYgU+L+JGuEHpHkfCBx2oE3NyPN9YAm/6da1ZR1iSeGd980ux0yTGwF8sL4vhUp4lCTsWBqZseztYCsc+QFDUiKMHMQVbftXIwDbtA10SVZlaCrpNHoXNDtWLRo28kqoHFty4+Lzqughqxu27Wf2Eh9MUx9fUcAJA3a/REYyrZjz8="
      on:
        tags: true
...
