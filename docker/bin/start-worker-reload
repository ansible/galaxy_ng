#!/bin/bash

set -o errexit
set -o nounset

WATCHED_FILES=$(python -c "print(' '.join([f'/src/{item}' for item in '$DEV_SOURCE_PATH'.split(':')]))")
exec find $WATCHED_FILES \( -path /app/.venv -o -path /app/build -o -path /app/.eggs \) -prune -o -name '*.py' -o -name '*.env' | entr -n -r pulpcore-worker
